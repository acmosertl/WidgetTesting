<!doctype html>
<html lang="bn">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>‡¶Æ‡¶æ‡¶ß‡¶¨‡¶Æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ ‚Äî ‡¶ï‡¶æ‡¶∞‡ßç‡¶° + ‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</title>
<style>
  :root{
    --bg:#fff6e8; --card:#d22f2f; --text:#ffffff; --ink:#2b1e16;
    --pill:#ffe6a7; --shadow:0 12px 30px rgba(0,0,0,.12);
    --accent:#8b5cf6; --ok:#22c55e;
  }
  body{margin:0;background:var(--bg);font-family: Noto Sans Bengali, system-ui, -apple-system, Segoe UI, Roboto, Arial; color:var(--ink)}
  .wrap{max-width:880px;margin:24px auto;padding:16px}
  .card{background:#fff;border-radius:20px;box-shadow:var(--shadow);padding:18px}
  .ek-hero{background:var(--card);color:var(--text);border-radius:28px;padding:28px 22px;margin-top:12px}
  .chip{display:inline-flex;gap:10px;align-items:center;background:var(--pill);color:#5b3a00;border-radius:999px;padding:6px 12px;font-weight:700}
  .h1{font-weight:900;font-size:34px;letter-spacing:.5px;margin:6px 0 10px}
  .h2{font-weight:800;font-size:24px;margin:0}
  .big{font-size:44px;font-weight:900;letter-spacing:1px;text-shadow:0 8px 30px rgba(0,0,0,.25)}
  .meta{opacity:.9;margin-top:10px;font-size:18px;line-height:1.45}
  .btn{display:inline-block;border:none;border-radius:16px;padding:14px 18px;font-weight:800;cursor:pointer;box-shadow:var(--shadow)}
  .btn-grad{background:linear-gradient(135deg,#ffcc66,#ff9a3c);color:#412500}
  .note{opacity:.7;font-size:14px;margin-top:12px}
  .tick{display:none;color:var(--ok);font-weight:900;margin-left:6px}
  .grid{display:grid;grid-template-columns:1fr;gap:16px}
  @media(min-width:680px){.grid{grid-template-columns: 1fr 1fr}}
  table{width:100%;border-collapse:collapse;background:#fff;border-radius:16px;overflow:hidden}
  thead th{background:#f3e8ff;color:#4c1d95;padding:12px 10px;text-align:left}
  tbody td{padding:12px 10px;border-bottom:1px solid #f1efe9}
  .center{text-align:center}
  /* popup */
  dialog{border:none;border-radius:24px;max-width:520px;width:min(92vw,520px);padding:0}
  dialog::backdrop{backdrop-filter: blur(9px) brightness(.9)}
  .pop-head{display:flex;justify-content:space-between;align-items:center;padding:14px 18px;border-bottom:1px solid #f1efe9}
  .pop-body{padding:10px 16px 18px}
  .x{width:34px;height:34px;border-radius:50%;border:0;background:#ffede1;cursor:pointer;font-size:18px}
  /* badges */
  .badge{display:inline-flex;gap:8px;align-items:center;padding:4px 10px;border-radius:999px;background:#fff;box-shadow:var(--shadow)}
  .small{font-size:13px;opacity:.85}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <div class="grid">
      <div>
        <div class="badge small" id="tzBadge">IST ‚Ä¢ UTC+05:30</div>
        <div class="ek-hero">
          <div class="chip">üå∏ ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ</div>
          <div style="margin-top:10px">
            <div class="big" id="ekName">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá‚Ä¶</div>
            <div class="h2"><span id="ekDate">‚Äî</span> ‚Ä¢ <span id="ddays">‚Äî</span> ‡¶¶‡¶ø‡¶® ‡¶¨‡¶æ‡¶ï‡¶ø</div>
            <div class="meta" id="paranaBox">‡¶™‡¶æ‡¶∞‡¶£: <span id="ekParana">‚Äî</span> <span class="tick" id="vTick">‚úî</span></div>
            <div class="meta small" id="sourceTag" style="margin-top:6px;opacity:.8">‡¶∏‡ßã‡¶∞‡ßç‡¶∏: ‚Äî</div>
          </div>
        </div>
        <div style="margin-top:14px">
          <button class="btn btn-grad" id="openList">üîî ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
          <div class="note">‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶ó‡¶£‡¶®‡¶æ ‡¶≠‡¶æ‡¶∞‡¶§‡ßÄ‡¶Ø‡¶º ‡¶Æ‡¶æ‡¶® ‡¶∏‡¶Æ‡¶Ø‡¶º (IST) ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ‡•§</div>
        </div>
      </div>
      <div>
        <div class="card" style="height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center">
          <div class="h2" style="margin-bottom:6px">‡¶è‡¶ñ‡¶æ‡¶® ‡¶•‡ßá‡¶ï‡ßá‡¶á ‡¶∏‡¶æ‡¶á‡¶°-‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®</div>
          <div class="small center" style="max-width:360px;opacity:.8">
            ‡¶è‡¶á ‡¶™‡ßá‡¶ú‡¶ü‡¶ø‡¶á iFrame ‡¶ï‡¶∞‡ßá Blogger ‡¶∏‡¶æ‡¶á‡¶°-‡¶™‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶≤‡ßá ‡¶¶‡¶ø‡¶®‡•§ ‡¶è‡¶ï‡¶á ‡¶∏‡ßã‡¶∞‡ßç‡¶∏ ‡¶•‡ßá‡¶ï‡ßá ‡¶ï‡¶æ‡¶∞‡ßç‡¶°+‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ‚Äî‡¶¶‡ßÅ‡¶ü‡ßã‡¶á ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶¨‡ßá‡•§
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Annual list (inline preview for page readers) -->
  <div class="card" style="margin-top:18px">
    <div class="h2" style="color:#5b21b6;margin-bottom:8px">üå∏ ‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ (IST)</div>
    <div class="small" style="opacity:.8;margin-bottom:10px">‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶Ø‡¶º (ISKCON + Madhavam PanjikƒÅ Hybrid)</div>
    <div style="overflow:auto">
      <table>
        <thead><tr><th>‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ</th><th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th><th>‡¶™‡¶æ‡¶∞‡¶£</th></tr></thead>
        <tbody id="tblBody"><tr><td colspan="3" class="center">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá‚Ä¶</td></tr></tbody>
      </table>
    </div>
  </div>
</div>

<!-- Popup -->
<dialog id="popup">
  <div class="pop-head">
    <div class="h2" style="color:#5b21b6;font-size:20px">üå∏ ‡¶¨‡¶æ‡¶∞‡ßç‡¶∑‡¶ø‡¶ï ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ (IST)</div>
    <button class="x" id="closePop">‚úï</button>
  </div>
  <div class="pop-body">
    <div class="small" style="opacity:.8;margin:2px 0 10px">‡¶§‡¶•‡ßç‡¶Ø ‡¶∏‡ßç‡¶¨‡¶Ø‡¶º‡¶Ç‡¶ï‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ü‡¶™‡¶°‡ßá‡¶ü ‡¶π‡¶Ø‡¶º (ISKCON + Madhavam PanjikƒÅ Hybrid)</div>
    <div style="overflow:auto;max-height:58vh">
      <table>
        <thead><tr><th>‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ</th><th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th><th>‡¶™‡¶æ‡¶∞‡¶£</th></tr></thead>
        <tbody id="tblBodyPop"><tr><td colspan="3" class="center">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá‚Ä¶</td></tr></tbody>
      </table>
    </div>
  </div>
</dialog>


  <script>
/* üîß FINAL AUTO-EKADASHI LOADER */
const GITHUB_JSON = "https://raw.githubusercontent.com/acmosertl/Madhavam-Surya-Siddhanto-Panjika-/refs/heads/main/ekadashi.json";

async function loadEkadashiData() {
  try {
    const res = await fetch(GITHUB_JSON, { cache: "no-store" });
    if (!res.ok) throw new Error("Fetch failed");

    const raw = await res.json();
    const list = Array.isArray(raw) ? raw : raw.ekadashi_list || [];

    if (!list.length) throw new Error("No data found");

    // sort & detect next
    const sorted = list.sort((a, b) => new Date(a.date) - new Date(b.date));
    const today = new Date();
    const next = sorted.find(e => new Date(e.date) >= today) || sorted[0];
    const remain = Math.ceil((new Date(next.date) - today) / (1000 * 60 * 60 * 24));

    // Update card
    document.querySelector(".ekadashi-name").innerText = next.name || "‡¶Ö‡¶ú‡¶æ‡¶®‡¶æ ‡¶è‡¶ï‡¶æ‡¶¶‡¶∂‡ßÄ";
    document.querySelector(".ekadashi-date").innerText = next.date || "--";
    document.querySelector(".ekadashi-remaining").innerText = `${remain} ‡¶¶‡¶ø‡¶® ‡¶¨‡¶æ‡¶ï‡¶ø`;
    document.querySelector(".ekadashi-paran").innerText =
      `‡¶™‡¶æ‡¶∞‡¶£: ${next.paran_start || "--"} - ${next.paran_end || "--"} ${
        next.verified ? "‚úÖ (" + next.verified + ")" : ""
      }`;

    document.querySelector(".load-status").style.display = "none";

    // Annual list render
    const tbody = document.querySelector(".annual-ekadashi tbody");
    tbody.innerHTML = sorted
      .map(
        e => `<tr>
          <td>${e.name}</td>
          <td>${e.date}</td>
          <td>${e.paran_start || "--"} - ${e.paran_end || "--"} ${
            e.verified ? "(" + e.verified + ")" : ""
          }</td>
        </tr>`
      )
      .join("");
  } catch (err) {
    console.error("‚ùå Ekadashi Load Error:", err);
    document.querySelector(".ekadashi-name").innerText = "‡¶°‡¶æ‡¶ü‡¶æ ‡¶≤‡ßã‡¶° ‡¶∏‡¶Æ‡¶∏‡ßç‡¶Ø‡¶æ...";
  }
}

// Auto run & 3-hour refresh
loadEkadashiData();
setInterval(loadEkadashiData, 3 * 60 * 60 * 1000);
  </script>

  
</body>
</html>
